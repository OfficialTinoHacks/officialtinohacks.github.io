<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>TinoHacks Live</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="TinoHacks, a project of Hacker Fund, is a two day hackathon on April 15-16, 2017 where both new and experienced programmers can work together on projects, learn new skills, and have a splendid time.">
    <meta name="author" content="The Tino Hacks Team">
    <!--Mobile App Compatibility-->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <!-- Schema.org markup for Google+ -->
    <meta itemprop="name" content="TinoHacks">
    <meta itemprop="description" content="TinoHacks, a project of Hacker Fund, is a two day hackathon on April 15-16, 2017 where both new and experienced programmers can work together on projects, learn new skills, and have a splendid time.">
    <meta itemprop="image" content="img/icons/apple-touch-icon-180x180.png">
    <!--Facebook Open Graph Data-->
    <meta property="og:title" content="TinoHacks" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="img/icons/apple-touch-icon-180x180.png" />
    <meta property="og:url" content="http://tinohacks.tech" />
    <meta property="og:description" content="TinoHacks, a project of Hacker Fund, is a two day hackathon on April 15-16, 2017 where both new and experienced programmers can work together on projects, learn new skills, and have a splendid time."
    />
    <!--Twitter Card Data-->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="http://tinohacks.tech">
    <meta name="twitter:title" content="TinoHacks">
    <meta name="twitter:description" content="TinoHacks, a project of Hacker Fund, is a two day hackathon on April 15-16, 2017 where both new and experienced programmers can work together on projects, learn new skills, and have a splendid time.">
    <meta name="twitter:image" content="img/icons/apple-touch-icon-180x180.png">
    <!--Website Favicon-->
    <link rel="icon" href="img/icons/favicon.ico">
    <!--Apple Touch Icons-->
    <link rel="apple-touch-icon-precomposed" href="img/icons/apple-touch-icon.png">
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="img/icons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/icons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/icons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/icons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="img/icons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="img/icons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="img/icons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon-precomposed" sizes="180x180" href="img/icons/apple-touch-icon-180x180.png">
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css" type="text/css">
    <!-- Plugin CSS -->
    <link rel="stylesheet" href="css/responsive.css" type="text/css">
    <link rel="stylesheet" href="css/stars.css" type="text/css">
    <link rel="stylesheet" href="font-awesome-4.6.3/css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" type="text/css" href="css/live_style.css">
</head>

<body>

    <div class="row">
        <div id="sponsorResources" class="col-md-24">
            SPONSOR RESOURCES&nbsp;
            <span class="glyphicon glyphicon-triangle-bottom" aria-hidden="true"></span>
            <div id="sponsorsWindow" style="width: 100%;"></div>

        </div>
    </div>
    <div class="container-fluid">
        <br>
        <div class="row">
            <div class="col-md-2 col-md-offset-11">
                <img class="center-block" style="width:100%;" src="img/logo-small.png" />
            </div>
        </div>

        <br>
        <br>

        <div class="row">
            <div class="col-md-8">
                <h3>TWEET US
                    <a href="https://twitter.com/tinohacks" target="_blank">@tinohacks</a>
                </h3>
                <div class="jumbotron widget-box">
                    <a class="twitter-timeline" data-height="60vh" href="https://twitter.com/TinoHacks?ref_src=twsrc%5Etfw">Tweets by TinoHacks</a>
                    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                </div>

            </div>
            <div class="col-md-16">
                <h3>ANNOUNCEMENTS</h3>
                <button class="btn btn-default" id="sponsorResources">SPONSOR RESOURCES</button>
                <div id="announcements" class="jumbotron widget-box">

                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-24">
                <h3>SPONSOR RESOURCES</h3>

                <div class="jumbotron dock">

                </div>
            </div>
        </div>

    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>
    <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>


    <script>
        async function fetchAnnouncements() {
            const headers = new Headers();

            const request = new Request(
                "https://onesignal.com/api/v1/notifications?app_id=f007ff53-ebb8-454e-8de5-16c3e75036e7", {
                    method: 'GET',
                    headers: {
                        "Authorization": "Basic OTRmMDEyODQtZThiZC00ZTgyLWIyZjQtMmYxY2ViZjEwYmNm"
                    },
                    cache: 'false'
                });

            const announcements = await fetch(request).then(data =>
                data.json());

            announcements.notifications.forEach(function (notification) {

                if (notification.headings.en && notification.contents.en) {

                    $("#announcements").append(
                        `<div class="jumbotron notification-box">
                        <h3 class="notificationTitle">${notification.headings.en}</h3>
                        <p class="lead">${notification.contents.en}</p>
                        <p class="lead pull-right">${convertToCurrentTime(notification.queued_at)}</p>
                    </div>`
                    );
                }

            });
        }

        // fetchAnnouncements();

        // var OneSignal = window.OneSignal || [];
        // OneSignal.push(function () {
        //     OneSignal.init({
        //         appId: "f007ff53-ebb8-454e-8de5-16c3e75036e7"
        //     });

        //     OneSignal.on('notificationDisplay', function (notification) {
        //         console.warn('OneSignal notification displayed:', notification);

        //         $("#announcements").prepend(
        //             `<div class="jumbotron notification-box">
        //                 <h3 class="notificationTitle">${notification.heading}</h3>
        //                 <p class="lead">${notification.content}</p>
        //                 <p class="lead pull-right">${convertToCurrentTime(notification.queued_at)}</p>
        //             </div>`
        //         );
        //     });
        // });

        var sponsorsOpen = false;

        $("#sponsorResources").click(function (e) {
            if (!sponsorsOpen) {
                TweenMax.to($("#sponsorsWindow"), 0.8, {
                    height: "100vh",
                    ease: Sine.easeOut
                });
            } else {
                TweenMax.to($("#sponsorsWindow"), 0.8, {
                    height: "8vh",
                    ease: Sine.easeOut
                });
            }

            sponsorsOpen = !sponsorsOpen;

        });

        function convertToCurrentTime(unix_timestamp) {

            var date = new Date(unix_timestamp * 1000);
            /*var hours = date.getHours();
             var minutes = "0" + date.getMinutes();
             var seconds = "0" + date.getSeconds();*/

            var current = new Date();

            var DateDiff = {

                inSeconds: function (d1, d2) {
                    var t2 = date.getTime();
                    var t1 = current.getTime();

                    return Math.abs(parseInt((t2 - t1) / (1000)));
                },

                inMinutes: function (d1, d2) {
                    var t2 = date.getTime();
                    var t1 = current.getTime();

                    return Math.abs(parseInt((t2 - t1) / (60 * 1000)));
                },

                inHours: function (d1, d2) {
                    var t2 = date.getTime();
                    var t1 = current.getTime();

                    return Math.abs(parseInt((t2 - t1) / (3600 * 1000)));
                },

                inDays: function (d1, d2) {
                    var t2 = date.getTime();
                    var t1 = current.getTime();

                    return Math.abs(parseInt((t2 - t1) / (24 * 3600 * 1000)));
                },

                inWeeks: function (d1, d2) {
                    var t2 = date.getTime();
                    var t1 = current.getTime();

                    return Math.abs(parseInt((t2 - t1) / (24 * 3600 * 1000 * 7)));
                },

                inMonths: function (d1, d2) {
                    var d1Y = current.getFullYear();
                    var d2Y = date.getFullYear();
                    var d1M = current.getMonth();
                    var d2M = date.getMonth();

                    return Math.abs((d2M + 12 * d2Y) - (d1M + 12 * d1Y));
                },

                inYears: function (d1, d2) {
                    return date.getFullYear() - current.getFullYear();
                }
            }

            //var formattedTime = ((hours > 12) ? hours - 12 : hours) + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);

            var yearDiff = DateDiff.inYears(current, date);
            var monthDiff = DateDiff.inMonths(current, date);
            var weekDiff = DateDiff.inWeeks(current, date);
            var dayDiff = DateDiff.inDays(current, date);
            var hourDiff = DateDiff.inHours(current, date);
            var minutesDiff = DateDiff.inMinutes(current, date);
            var secondsDiff = DateDiff.inSeconds(current, date);

            if (yearDiff >= 2) {
                return yearDiff + " years ago";
            } else if (yearDiff >= 1) {
                return "1 year ago";
            } else if (monthDiff >= 2) {
                return monthDiff + " months ago"
            } else if (monthDiff >= 1) {

                return "1 month ago";

            } else if (weekDiff >= 2) {
                return weekDiff + " weeks ago"
            } else if (weekDiff >= 1) {
                return "1 week ago"

            } else if (dayDiff >= 2) {
                return dayDiff + " days ago"
            } else if (dayDiff >= 1) {
                return "1 day ago"

            } else if (hourDiff >= 2) {

                return hourDiff + " hours ago"

            } else if (hourDiff >= 1) {
                if (minutesDiff > 0) {
                    return "1 hour, " + (minutesDiff - (60 * hourDiff)) + " mins ago"
                } else {
                    return "1 hour ago"
                }
            } else if (minutesDiff >= 2) {

                return minutesDiff + " mins ago"

            } else if (minutesDiff >= 1) {

                return "1 minute ago"

            } else if (secondsDiff >= 2) {

                return secondsDiff + " secs ago"

            } else if (secondsDiff >= 1) {

                return "1 second ago"

            }

            return "Just Now"

        }

        // Initialize Firebase
        // var config = {
        //     apiKey: "AIzaSyDmBBGkNjjv1uylYjgJZKhUaQerUdxCw3w",
        //     authDomain: "tinohacks2.firebaseapp.com",
        //     databaseURL: "https://tinohacks2.firebaseio.com",
        //     projectId: "tinohacks2",
        //     storageBucket: "tinohacks2.appspot.com",
        //     messagingSenderId: "779949253339"
        // };
        // firebase.initializeApp(config);

        // const db = firebase.database();

        // db.ref().child("posts").on('value', snapshot => {
        //     const posts = snapshot.val();

        //     console.log(posts);

        //     snapshot.forEach(post => {

        //         $("#announcements").append(
        // `<div class="jumbotron notification-box">
        //     <h3 class="notificationTitle">${post.val().title}</h3>
        //     <p class="lead">${post.val().body}</p>
        //     <p class="lead pull-right">${post.val().time}</p>
        // </div>`
        //         );

        //     });
        // });
        //setInterval(() => fetchAnnouncements(), 5000);
    </script>
</body>

</html>